datasource postgres {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  avatarUrl       String?
  birthday        DateTime?
  city            String?
  country         String?
  creatTime       DateTime         @default(now())
  gender          EnumUserGender?
  hubitusCheckups HubitusCheckup[]
  id              String           @id @default(cuid())
  inviterId       String?
  language        String?
  lastLoginTime   DateTime
  messageNotifies MessageNotify[]
  nickName        String?
  oauthType       String
  openId          String
  password        String
  phone           String?
  province        String?
  roles           Json
  sessionKey      String
  trueName        String?
  unionId         String
  userIdCard      String?
  username        String           @unique
  userStatuses    UserStatus[]
}

model HubitusCheckup {
  countResult    String?
  currentHabitus String?
  id             String   @id @default(cuid())
  suggest        String?
  testResult     String?
  testTime       DateTime
  user           User     @relation(fields: [userId], references: [id])
  userId         String
}

model UserStatus {
  blobValue   String?
  dateValue   DateTime?
  doubleValue Float?
  id          String    @id @default(cuid())
  intValue    Int?
  jsonValue   Json?
  status      String?
  streamId    String?
  stringValue String?
  updateTime  DateTime  @updatedAt
  user        User?     @relation(fields: [userId], references: [id])
  userId      String?
}

model MessageNotify {
  event          EventLog? @relation(fields: [eventId], references: [id])
  eventId        String?
  id             String    @id @default(cuid())
  isNew          Boolean
  messageContent String
  messageSource  String
  messageType    String
  sendTime       DateTime  @default(now())
  user           User?     @relation(fields: [userId], references: [id])
  userId         String?
}

model EventLog {
  eventName       String?
  eventParam      Json?
  eventTime       DateTime        @default(now())
  eventType       String
  id              String          @id @default(cuid())
  messageNotifies MessageNotify[]
  relateUser      Json?
}

enum EnumUserGender {
  Unknown
  Male
  Female
}
